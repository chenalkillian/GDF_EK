{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yujir\\\\Documents\\\\Projet annuel\\\\Projjet_Annuel_Perso\\\\partiefront\\\\src\\\\components\\\\PageAdmin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { jwtDecode } from 'jwt-decode'; // Correction ici\nimport './Admin.css';\nimport { Bar } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PageAdmin() {\n  _s();\n  const [role, setRole] = useState(''); // Correction ici pour le nom de la fonction setter\n  const [userId, setUserId] = useState(''); // Correction ici pour le nom de la fonction setter\n  const [token, setToken] = useState('');\n  const [denied, setDenied] = useState(false);\n  const [totalFile, setTotalFile] = useState(2);\n  const [totalFileNow, settotalFileNow] = useState(0);\n  useEffect(() => {\n    const value = Cookies.get('token');\n    if (value) {\n      const decodedToken = jwtDecode(value);\n      const tokenData = JSON.parse(value);\n      setUserId(decodedToken.id);\n      setRole(decodedToken.role); // Ajout de la définition du rôle\n      setToken(tokenData);\n    }\n  }, []);\n  const data = {\n    labels: ['Total de fichier uplouade', 'Fichier uplouader aujourd\\'hui'],\n    datasets: [{\n      label: 'Sales 2021 (M)',\n      data: [totalFile, totalFileNow],\n      backgroundColor: 'rgba(red)',\n      borderColor: 'rgba(75,192,192,1)',\n      borderWidth: 1\n    }]\n  };\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      y: {\n        beginAtZero: true\n      }\n    }\n  };\n  const allFilecount = async () => {\n    try {\n      const response = await axios.post('http://localhost:8000/file/fileAllcount', {\n        token: token\n      });\n      if (response.status === 200) {\n        setTotalFile(response.data);\n      } else {}\n    } catch (error) {\n      console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n    }\n  };\n  const allFilecountNow = async () => {\n    try {\n      const response = await axios.post('http://localhost:8000/file/fileAllcountNow', {\n        token: token\n      });\n      if (response.status === 200) {\n        settotalFileNow(response.data);\n      } else {}\n    } catch (error) {\n      console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n    }\n  };\n  allFilecount();\n  allFilecountNow();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: role !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '50vh',\n        width: '100vw'\n      },\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: data,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 10\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"denied-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"denied-text\",\n          children: \"Vous n'avez pas le droit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 1\n    }, this)\n  }, void 0, false);\n}\n_s(PageAdmin, \"+diNxkrmFLUgyGgxP7kEusEwESk=\");\n_c = PageAdmin;\nexport default PageAdmin;\nvar _c;\n$RefreshReg$(_c, \"PageAdmin\");","map":{"version":3,"names":["React","useState","useEffect","axios","Cookies","jwtDecode","Bar","jsxDEV","_jsxDEV","Fragment","_Fragment","PageAdmin","_s","role","setRole","userId","setUserId","token","setToken","denied","setDenied","totalFile","setTotalFile","totalFileNow","settotalFileNow","value","get","decodedToken","tokenData","JSON","parse","id","data","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","scales","y","beginAtZero","allFilecount","response","post","status","error","console","allFilecountNow","children","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Users/yujir/Documents/Projet annuel/Projjet_Annuel_Perso/partiefront/src/components/PageAdmin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {jwtDecode} from 'jwt-decode'; // Correction ici\r\nimport './Admin.css';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\n\r\nfunction PageAdmin() {\r\n  const [role, setRole] = useState(''); // Correction ici pour le nom de la fonction setter\r\n  const [userId, setUserId] = useState(''); // Correction ici pour le nom de la fonction setter\r\n  const [token, setToken] = useState('');\r\n  const [denied, setDenied] = useState(false);\r\n  const [totalFile, setTotalFile] = useState(2);\r\n  const [totalFileNow, settotalFileNow] = useState(0);\r\n\r\n\r\n  useEffect(() => {\r\n    const value = Cookies.get('token');\r\n    if (value) {\r\n      const decodedToken = jwtDecode(value);\r\n      const tokenData = JSON.parse(value);\r\n\r\n      setUserId(decodedToken.id);\r\n      setRole(decodedToken.role); // Ajout de la définition du rôle\r\n      setToken(tokenData);\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  const data = {\r\n    labels: ['Total de fichier uplouade', 'Fichier uplouader aujourd\\'hui'],\r\n    datasets: [\r\n      {\r\n        label: 'Sales 2021 (M)',\r\n        data: [totalFile, totalFileNow],\r\n        backgroundColor: 'rgba(red)',\r\n        borderColor: 'rgba(75,192,192,1)',\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n      },\r\n    },\r\n  };\r\n\r\n  const allFilecount = async () => {\r\n    try {\r\n      const response = await axios.post('http://localhost:8000/file/fileAllcount', {\r\n        token: token\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        setTotalFile(response.data);\r\n      } else {\r\n      }\r\n    } catch (error) {\r\n      console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n    }\r\n  };\r\n\r\n  const allFilecountNow = async () => {\r\n    try {\r\n      const response = await axios.post('http://localhost:8000/file/fileAllcountNow', {\r\n        token: token\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        settotalFileNow(response.data);\r\n      } else {\r\n      }\r\n    } catch (error) {\r\n      console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n    }\r\n  };\r\nallFilecount();  \r\nallFilecountNow();\r\n\r\n  return (\r\n    <>\r\n      {role !== '' ? (\r\n         <div style={{ height: '50vh', width: '100vw' }}>\r\n         <Bar data={data} options={options} />\r\n       </div>\r\n        \r\n      ) : (\r\n<div className=\"denied-container\">\r\n      <div className=\"overlay\">\r\n        <h1 className=\"denied-text\">Vous n'avez pas le droit</h1>\r\n      </div>\r\n    </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PageAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}