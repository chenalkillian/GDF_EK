{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yujir\\\\Documents\\\\Projet annuel\\\\Projjet_Annuel_Perso\\\\partiefront\\\\src\\\\components\\\\PageAdmin.js\",\n  _s = $RefreshSig$();\n// App.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { jwtDecode } from 'jwt-decode';\nimport './Admin.css';\nimport BarChart3D from './';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PageAdmin() {\n  _s();\n  const [role, setRole] = useState('');\n  const [userId, setUserId] = useState('');\n  const [token, setToken] = useState('');\n  const [denied, setDenied] = useState(false);\n  const [totalFile, setTotalFile] = useState(2);\n  const [totalFileNow, setTotalFileNow] = useState(0);\n  useEffect(() => {\n    const value = Cookies.get('token');\n    if (value) {\n      const decodedToken = jwtDecode(value);\n      const tokenData = JSON.parse(value);\n      setUserId(decodedToken.id);\n      setRole(decodedToken.role);\n      setToken(tokenData);\n    }\n  }, []);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.post('http://localhost:8000/file/fileAllcount', {\n          token: token\n        });\n        if (response.status === 200) {\n          setTotalFile(response.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n      }\n      try {\n        const responseNow = await axios.post('http://localhost:8000/file/fileAllcountNow', {\n          token: token\n        });\n        if (responseNow.status === 200) {\n          setTotalFileNow(responseNow.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n      }\n    };\n    fetchData();\n  }, [token]);\n  const data = [totalFile, totalFileNow];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: role !== '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: '50vh',\n        width: '100vw'\n      },\n      children: /*#__PURE__*/_jsxDEV(BarChart3D, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"denied-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"denied-text\",\n          children: \"Vous n'avez pas le droit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(PageAdmin, \"fbbuc14DhYGVczr5ZmDI1RDHCvw=\");\n_c = PageAdmin;\nexport default PageAdmin;\nvar _c;\n$RefreshReg$(_c, \"PageAdmin\");","map":{"version":3,"names":["React","useState","useEffect","axios","Cookies","jwtDecode","BarChart3D","jsxDEV","_jsxDEV","Fragment","_Fragment","PageAdmin","_s","role","setRole","userId","setUserId","token","setToken","denied","setDenied","totalFile","setTotalFile","totalFileNow","setTotalFileNow","value","get","decodedToken","tokenData","JSON","parse","id","fetchData","response","post","status","data","error","console","responseNow","children","style","height","width","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Users/yujir/Documents/Projet annuel/Projjet_Annuel_Perso/partiefront/src/components/PageAdmin.js"],"sourcesContent":["// App.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {jwtDecode} from 'jwt-decode';\r\nimport './Admin.css';\r\nimport BarChart3D from './';\r\n\r\nfunction PageAdmin() {\r\n  const [role, setRole] = useState('');\r\n  const [userId, setUserId] = useState('');\r\n  const [token, setToken] = useState('');\r\n  const [denied, setDenied] = useState(false);\r\n  const [totalFile, setTotalFile] = useState(2);\r\n  const [totalFileNow, setTotalFileNow] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const value = Cookies.get('token');\r\n    if (value) {\r\n      const decodedToken = jwtDecode(value);\r\n      const tokenData = JSON.parse(value);\r\n\r\n      setUserId(decodedToken.id);\r\n      setRole(decodedToken.role);\r\n      setToken(tokenData);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.post('http://localhost:8000/file/fileAllcount', {\r\n          token: token\r\n        });\r\n        if (response.status === 200) {\r\n          setTotalFile(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n      }\r\n\r\n      try {\r\n        const responseNow = await axios.post('http://localhost:8000/file/fileAllcountNow', {\r\n          token: token\r\n        });\r\n        if (responseNow.status === 200) {\r\n          setTotalFileNow(responseNow.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [token]);\r\n\r\n  const data = [totalFile, totalFileNow];\r\n\r\n  return (\r\n    <>\r\n      {role !== '' ? (\r\n        <div style={{ height: '50vh', width: '100vw' }}>\r\n          <BarChart3D data={data} />\r\n        </div>\r\n      ) : (\r\n        <div className=\"denied-container\">\r\n          <div className=\"overlay\">\r\n            <h1 className=\"denied-text\">Vous n'avez pas le droit</h1>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PageAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}