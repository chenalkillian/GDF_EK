{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport { jwtDecode } from 'jwt-decode'; // Notez que ce n'est pas {jwtDecode}, mais simplement jwtDecode\nimport './PageUser.css';\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PageAccueil() {\n  _s();\n  const [role, setRole] = useState('User');\n  const [userId, setUserId] = useState('');\n  const [token, setToken] = useState('');\n  useEffect(() => {\n    const value = Cookies.get('token');\n    console.log('Token from cookies:', value); // Debug: Check the retrieved token\n    if (value) {\n      const tokenData = JSON.parse(value);\n      console.log('Parsed token data:', tokenData); // Debug: Check parsed token data\n\n      try {\n        const decodedToken = jwtDecode(tokenData);\n        console.log('Decoded token:', decodedToken); // Debug: Check decoded token data\n\n        setUserId(decodedToken.id);\n        setToken(tokenData);\n\n        // Update the role and check for redirection\n        const userRole = decodedToken.role;\n        setRole(userRole);\n        if (userRole === 'User') {\n          alert('Redirecting to /Denied because role is User');\n          window.location.href = '/Denied';\n        }\n      } catch (error) {\n        console.error('Error decoding token:', error);\n      }\n    }\n    alert(role);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"Page admin\"\n  }, void 0, false);\n}\n_s(PageAccueil, \"+IohqvoPxInadOvNPPWgdKiujgk=\");\n_c = PageAccueil;\nexport default PageAccueil;\nvar _c;\n$RefreshReg$(_c, \"PageAccueil\");","map":{"version":3,"names":["React","useState","useEffect","Cookies","jwtDecode","Fragment","_Fragment","jsxDEV","_jsxDEV","PageAccueil","_s","role","setRole","userId","setUserId","token","setToken","value","get","console","log","tokenData","JSON","parse","decodedToken","id","userRole","alert","window","location","href","error","children","_c","$RefreshReg$"],"sources":["C:/Users/yujir/Documents/Projet annuel/Projjet_Annuel_Perso/partiefront/src/components/PageAdmin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Cookies from 'js-cookie';\r\nimport {jwtDecode} from 'jwt-decode';  // Notez que ce n'est pas {jwtDecode}, mais simplement jwtDecode\r\nimport './PageUser.css';\r\n\r\nfunction PageAccueil() {\r\n  const [role, setRole] = useState('User');\r\n  const [userId, setUserId] = useState('');\r\n  const [token, setToken] = useState('');\r\n\r\n  useEffect(() => {\r\n    const value = Cookies.get('token');\r\n    console.log('Token from cookies:', value); // Debug: Check the retrieved token\r\n    if (value) {\r\n      const tokenData = JSON.parse(value);\r\n      console.log('Parsed token data:', tokenData); // Debug: Check parsed token data\r\n\r\n      try {\r\n        const decodedToken = jwtDecode(tokenData);\r\n        console.log('Decoded token:', decodedToken); // Debug: Check decoded token data\r\n\r\n        setUserId(decodedToken.id);\r\n        setToken(tokenData);\r\n\r\n        // Update the role and check for redirection\r\n        const userRole = decodedToken.role;\r\n        setRole(userRole);\r\n\r\n        if (userRole === 'User') {\r\n          alert('Redirecting to /Denied because role is User');\r\n          window.location.href = '/Denied';\r\n        }\r\n      } catch (error) {\r\n        console.error('Error decoding token:', error);\r\n      }\r\n    }alert(role)\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      Page admin\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PageAccueil;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAAQC,SAAS,QAAO,YAAY,CAAC,CAAE;AACvC,OAAO,gBAAgB;AAAC,SAAAC,QAAA,IAAAC,SAAA,EAAAC,MAAA,IAAAC,OAAA;AAExB,SAASC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,MAAM,CAAC;EACxC,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACd,MAAMe,KAAK,GAAGd,OAAO,CAACe,GAAG,CAAC,OAAO,CAAC;IAClCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,KAAK,CAAC,CAAC,CAAC;IAC3C,IAAIA,KAAK,EAAE;MACT,MAAMI,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACN,KAAK,CAAC;MACnCE,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEC,SAAS,CAAC,CAAC,CAAC;;MAE9C,IAAI;QACF,MAAMG,YAAY,GAAGpB,SAAS,CAACiB,SAAS,CAAC;QACzCF,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEI,YAAY,CAAC,CAAC,CAAC;;QAE7CV,SAAS,CAACU,YAAY,CAACC,EAAE,CAAC;QAC1BT,QAAQ,CAACK,SAAS,CAAC;;QAEnB;QACA,MAAMK,QAAQ,GAAGF,YAAY,CAACb,IAAI;QAClCC,OAAO,CAACc,QAAQ,CAAC;QAEjB,IAAIA,QAAQ,KAAK,MAAM,EAAE;UACvBC,KAAK,CAAC,6CAA6C,CAAC;UACpDC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,SAAS;QAClC;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdZ,OAAO,CAACY,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF;IAACJ,KAAK,CAAChB,IAAI,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEH,OAAA,CAAAF,SAAA;IAAA0B,QAAA,EAAE;EAEF,gBAAE,CAAC;AAEP;AAACtB,EAAA,CAtCQD,WAAW;AAAAwB,EAAA,GAAXxB,WAAW;AAwCpB,eAAeA,WAAW;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}